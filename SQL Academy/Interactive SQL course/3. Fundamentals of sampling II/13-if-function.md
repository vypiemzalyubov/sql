# Условная функция IF

В предыдущем уроке мы рассматривали оператор `CASE` для реализации условной логики в SQL.
Однако это не единственный механизм, с помощью которого возможно реализовать ветвление логики в запросе.
Пришло время обратить наше внимание на функцию `IF`.

## Синтаксис IF

```sql
IF (условное_выражение, значение_1, значение_2);
```

Если условное выражение, передаваемое в качестве первого аргумента в функцию `IF`,
истинно, функция вернёт значение второго аргумента `значение_1`, иначе возвращается значение третьего аргумента `значение_2`.

### Примеры

- Простое сравнение двух чисел. Так как 10 не больше 20, функция вернёт "FALSE".

  ```sql
  SELECT IF(10 > 20, "TRUE", "FALSE");
  ```

  | IF(10>20, "TRUE", "FALSE") |
  | -------------------------- |
  | FALSE                      |

- Пример использования с реальной БД. Необходимо на основании цены определить принадлежность жилья к одному из двух классов: "Комфорт-класс" и "Эконом-класс".
  Если цена больше или равна `150`, то это жильё относится к "Комфорт-класс".

  <ERD databaseName="Airbnb" />

  ```sql
  SELECT id, price,
      IF(price >= 150, "Комфорт-класс", "Эконом-класс") AS category
      FROM Rooms
  ```

  | id  | price | category      |
  | --- | ----- | ------------- |
  | 1   | 149   | Эконом-класс  |
  | 2   | 225   | Комфорт-класс |
  | 3   | 150   | Комфорт-класс |
  | 4   | 89    | Эконом-класс  |
  | 5   | 80    | Эконом-класс  |
  | 6   | 200   | Комфорт-класс |
  | 7   | 60    | Эконом-класс  |
  | 8   | 79    | Эконом-класс  |
  | 9   | 79    | Эконом-класс  |
  | 10  | 150   | Комфорт-класс |
  | 11  | 135   | Эконом-класс  |
  | 12  | 85    | Эконом-класс  |
  | 13  | 89    | Эконом-класс  |
  | 14  | 85    | Эконом-класс  |
  | 15  | 120   | Эконом-класс  |
  | 16  | 140   | Эконом-класс  |
  | 17  | 215   | Комфорт-класс |
  | 18  | 140   | Эконом-класс  |
  | 19  | 99    | Эконом-класс  |
  | 20  | 190   | Комфорт-класс |
  | 21  | 299   | Комфорт-класс |
  | 22  | 130   | Эконом-класс  |
  | 23  | 80    | Эконом-класс  |
  | 24  | 110   | Эконом-класс  |
  | 25  | 120   | Эконом-класс  |
  | 26  | 60    | Эконом-класс  |
  | 27  | 80    | Эконом-класс  |
  | 28  | 150   | Комфорт-класс |
  | 29  | 44    | Эконом-класс  |
  | 30  | 30    | Комфорт-класс |
  | 31  | 31    | Эконом-класс  |
  | 32  | 32    | Эконом-класс  |
  | 33  | 33    | Эконом-класс  |
  | 34  | 34    | Эконом-класс  |
  | 35  | 35    | Эконом-класс  |
  | 36  | 36    | Эконом-класс  |
  | 37  | 37    | Эконом-класс  |
  | 38  | 38    | Эконом-класс  |
  | 39  | 39    | Комфорт-класс |
  | 40  | 40    | Эконом-класс  |
  | 41  | 41    | Эконом-класс  |
  | 42  | 42    | Эконом-класс  |
  | 43  | 43    | Эконом-класс  |
  | 44  | 44    | Эконом-класс  |
  | 45  | 45    | Комфорт-класс |
  | 46  | 46    | Комфорт-класс |
  | 47  | 47    | Эконом-класс  |
  | 48  | 48    | Эконом-класс  |
  | 49  | 49    | Эконом-класс  |
  | 50  | 50    | Эконом-класс  |

- Функции `IF` можно также вкладывать друг в друга, эмулируя оператор `CASE`.

  ```sql
  SELECT id, price,
      IF(price >= 200, "Бизнес-класс",
          IF(price >= 150,
              "Комфорт-класс", "Эконом-класс")) AS category
      FROM Rooms
  ```

  | id  | price | category      |
  | --- | ----- | ------------- |
  | 1   | 1     | Эконом-класс  |
  | 2   | 2     | Бизнес-класс  |
  | 3   | 3     | Комфорт-класс |
  | 4   | 4     | Эконом-класс  |
  | 5   | 5     | Эконом-класс  |
  | 6   | 6     | Бизнес-класс  |
  | 7   | 7     | Эконом-класс  |
  | 8   | 8     | Эконом-класс  |
  | 9   | 9     | Эконом-класс  |
  | 10  | 10    | Комфорт-класс |
  | 11  | 11    | Эконом-класс  |
  | 12  | 12    | Эконом-класс  |
  | 13  | 13    | Эконом-класс  |
  | 14  | 14    | Эконом-класс  |
  | 15  | 15    | Эконом-класс  |
  | 16  | 16    | Эконом-класс  |
  | 17  | 17    | Бизнес-класс  |
  | 18  | 18    | Эконом-класс  |
  | 19  | 19    | Эконом-класс  |
  | 20  | 20    | Комфорт-класс |
  | 21  | 21    | Бизнес-класс  |
  | 22  | 22    | Эконом-класс  |
  | 23  | 23    | Эконом-класс  |
  | 24  | 24    | Эконом-класс  |
  | 25  | 25    | Эконом-класс  |
  | 26  | 26    | Эконом-класс  |
  | 27  | 27    | Эконом-класс  |
  | 28  | 28    | Комфорт-класс |
  | 29  | 29    | Эконом-класс  |
  | 30  | 30    | Комфорт-класс |
  | 31  | 31    | Эконом-класс  |
  | 32  | 32    | Эконом-класс  |
  | 33  | 33    | Эконом-класс  |
  | 34  | 34    | Эконом-класс  |
  | 35  | 35    | Эконом-класс  |
  | 36  | 36    | Эконом-класс  |
  | 37  | 37    | Эконом-класс  |
  | 38  | 38    | Эконом-класс  |
  | 39  | 39    | Комфорт-класс |
  | 40  | 40    | Эконом-класс  |
  | 41  | 41    | Эконом-класс  |
  | 42  | 42    | Эконом-класс  |
  | 43  | 43    | Эконом-класс  |
  | 44  | 44    | Эконом-класс  |
  | 45  | 45    | Комфорт-класс |
  | 46  | 46    | Комфорт-класс |
  | 47  | 47    | Эконом-класс  |
  | 48  | 48    | Эконом-класс  |
  | 49  | 49    | Эконом-класс  |
  | 50  | 50    | Эконом-класс  |

## Функции IFNULL и NULLIF

Помимо функции `IF`, в SQL также есть более простые, но менее универсальные функции `IFNULL` и `NULLIF`,
направленные на обработку `NULL` значений.

### Синтаксис IFNULL

```sql
IFNULL(значение, альтернативное_значение);
```

Функция `IFNULL` возвращает `значение`, переданное первым аргументом, если оно не равно `NULL`, иначе возвращает
`альтернативное_значение`.

### Примеры с функцией IFNULL

- Если первый аргумент не равен `NULL`, то вернётся именно он.

  ```sql
  SELECT IFNULL("SQL Academy", "Альтернатива SQL Academy") AS sql_trainer;
  ```

  | sql_trainer |
  | ----------- |
  | SQL Academy |

- Если первый аргумент равен `NULL`, то вернётся значение, переданное вторым аргументом.

  ```sql
  SELECT IFNULL(NULL, "Альтернатива SQL Academy") AS sql_trainer;
  ```

  | sql_trainer             |
  | ----------------------- |
  | Alternative SQL Academy |

### Синтаксис NULLIF

```sql
NULLIF(значение_1, значение_2);
```

Функция `NULLIF` возвращает `NULL`, если `значение_1` равно `значению_2`, в противном случае возвращает `значение_1`.

### Примеры с функцией NULLIF

- Если значение первого аргумента равно значению второго аргумента, то возвращается `NULL`.

  ```sql
  SELECT NULLIF("SQL Academy", "SQL Academy") AS sql_trainer;
  ```

  | sql_trainer |
  | ----------- |
  | null        |

- Если значения первого и второго аргумента различаются, то возвращается значение первого аргумента.

  ```sql
  SELECT NULLIF("SQL Academy", "Альтернатива SQL Academy") AS sql_trainer;
  ```

  | sql_trainer |
  | ----------- |
  | SQL Academy |
